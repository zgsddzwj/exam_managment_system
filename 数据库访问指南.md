# æ•°æ®åº“è®¿é—®æŒ‡å—

## ğŸ“ æ•°æ®åº“ä½ç½®

**æ•°æ®åº“æ–‡ä»¶ï¼š** `backend/db.sqlite3`  
**æ•°æ®åº“ç±»å‹ï¼š** SQLiteï¼ˆå¼€å‘ç¯å¢ƒï¼‰

---

## ğŸ”§ è®¿é—®æ–¹å¼

### æ–¹æ³•1ï¼šDjango Adminï¼ˆæ¨è - æœ€ç®€å•ï¼‰

Django Admin æä¾›äº†å‹å¥½çš„Webç•Œé¢æ¥ç®¡ç†æ‰€æœ‰æ•°æ®ã€‚

#### æ­¥éª¤1ï¼šåˆ›å»ºè¶…çº§ç”¨æˆ·

```bash
cd backend
conda activate exam_management
python manage.py createsuperuser
```

æŒ‰æç¤ºè¾“å…¥ï¼š
- ç”¨æˆ·åï¼ˆå¦‚ï¼šadminï¼‰
- é‚®ç®±ï¼ˆå¯é€‰ï¼‰
- å¯†ç 

#### æ­¥éª¤2ï¼šè®¿é—®Adminç•Œé¢

1. ç¡®ä¿åç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š**http://localhost:8000/admin/**
3. ä½¿ç”¨åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•

#### Adminä¸­å¯ä»¥ç®¡ç†çš„æ¨¡å‹ï¼š

- âœ… **ç”¨æˆ· (Users)** - æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰ç”¨æˆ·è´¦å·
- âœ… **ç­çº§ (Classes)** - æŸ¥çœ‹å’Œç®¡ç†ç­çº§
- âœ… **é‚€è¯·ç  (Invitation Codes)** - æŸ¥çœ‹å’Œç®¡ç†é‚€è¯·ç 
- âœ… **ä»»åŠ¡ (Tasks)** - æŸ¥çœ‹å’Œç®¡ç†ä»»åŠ¡
- âœ… **æµ‹è¯•ç”¨ä¾‹ (Test Cases)** - æŸ¥çœ‹å’Œç®¡ç†æµ‹è¯•ç”¨ä¾‹
- âœ… **æäº¤ (Submissions)** - æŸ¥çœ‹æ‰€æœ‰ä»£ç æäº¤å’Œè¯„åˆ†
- âœ… **æµ‹è¯•ç»“æœ (Test Results)** - æŸ¥çœ‹è¯¦ç»†çš„æµ‹è¯•ç»“æœ
- âœ… **æµ‹è¯•å°è¯• (Test Attempts)** - æŸ¥çœ‹æ‰€æœ‰æµ‹è¯•å°è¯•è®°å½•

---

### æ–¹æ³•2ï¼šDjango Shellï¼ˆPythonäº¤äº’å¼ï¼‰

é€‚åˆè¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œæ“ä½œã€‚

```bash
cd backend
conda activate exam_management
python manage.py shell
```

#### å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹ï¼š

```python
# å¯¼å…¥æ¨¡å‹
from users.models import User
from classes.models import Class
from tasks.models import Task
from submissions.models import Submission

# æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
users = User.objects.all()
for user in users:
    print(f"{user.id}: {user.username} - {user.role}")

# æŸ¥è¯¢æ‰€æœ‰ç­çº§
classes = Class.objects.all()
for cls in classes:
    print(f"{cls.id}: {cls.name} - æ•™å¸ˆ: {cls.teacher.username}")

# æŸ¥è¯¢æŸä¸ªç­çº§çš„æ‰€æœ‰ä»»åŠ¡
class_obj = Class.objects.get(id=1)
tasks = Task.objects.filter(class_obj=class_obj)
for task in tasks:
    print(f"{task.title} - {task.language}")

# æŸ¥è¯¢æ‰€æœ‰æäº¤
submissions = Submission.objects.all()
for sub in submissions:
    print(f"å­¦ç”Ÿ: {sub.student.username}, ä»»åŠ¡: {sub.task.title}, åˆ†æ•°: {sub.score}")
```

---

### æ–¹æ³•3ï¼šSQLiteå‘½ä»¤è¡Œå·¥å…·

ç›´æ¥ä½¿ç”¨SQLiteå‘½ä»¤è¡Œå·¥å…·è®¿é—®æ•°æ®åº“æ–‡ä»¶ã€‚

```bash
cd backend
sqlite3 db.sqlite3
```

#### å¸¸ç”¨SQLå‘½ä»¤ï¼š

```sql
-- æŸ¥çœ‹æ‰€æœ‰è¡¨
.tables

-- æŸ¥çœ‹è¡¨ç»“æ„
.schema users_user

-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
SELECT id, username, email, role FROM users_user;

-- æŸ¥è¯¢æ‰€æœ‰ç­çº§
SELECT id, name, teacher_id FROM classes_class;

-- æŸ¥è¯¢æ‰€æœ‰ä»»åŠ¡
SELECT id, title, language, class_obj_id FROM tasks_task;

-- æŸ¥è¯¢æ‰€æœ‰æäº¤
SELECT id, student_id, task_id, score, submitted_at FROM submissions_submission;

-- é€€å‡º
.quit
```

---

### æ–¹æ³•4ï¼šå¯è§†åŒ–å·¥å…·ï¼ˆæ¨èä½¿ç”¨ï¼‰

#### 4.1 DB Browser for SQLiteï¼ˆå…è´¹ï¼‰

1. **ä¸‹è½½å®‰è£…ï¼š** https://sqlitebrowser.org/
2. **æ‰“å¼€æ•°æ®åº“ï¼š**
   - æ‰“å¼€ DB Browser for SQLite
   - ç‚¹å‡» "æ‰“å¼€æ•°æ®åº“"
   - é€‰æ‹© `backend/db.sqlite3` æ–‡ä»¶
3. **æŸ¥çœ‹æ•°æ®ï¼š**
   - åœ¨ "æµè§ˆæ•°æ®" æ ‡ç­¾é¡µä¸­é€‰æ‹©è¡¨
   - å¯ä»¥æŸ¥çœ‹ã€ç¼–è¾‘ã€å¯¼å‡ºæ•°æ®

#### 4.2 VS Code æ‰©å±•

å¦‚æœä½ ä½¿ç”¨ VS Codeï¼Œå¯ä»¥å®‰è£… SQLite æ‰©å±•ï¼š
- æ‰©å±•åï¼š**SQLite Viewer** æˆ– **SQLite**
- å®‰è£…åç›´æ¥åœ¨ VS Code ä¸­æ‰“å¼€ `db.sqlite3` æ–‡ä»¶å³å¯æŸ¥çœ‹

#### 4.3 Navicatï¼ˆæ”¯æŒå¤šç§æ•°æ®åº“ï¼‰

Navicat æ”¯æŒè¿æ¥ SQLite æ•°æ®åº“ï¼š

1. **æ‰“å¼€ Navicat**
2. **åˆ›å»ºæ–°è¿æ¥ï¼š**
   - ç‚¹å‡»å·¦ä¸Šè§’ "è¿æ¥" â†’ "SQLite"
   - æˆ–è€…ç‚¹å‡» "æ–‡ä»¶" â†’ "æ–°å»ºè¿æ¥" â†’ "SQLite"
3. **é…ç½®è¿æ¥ï¼š**
   - **è¿æ¥åï¼š** è‡ªå®šä¹‰ï¼ˆå¦‚ï¼šexam_managementï¼‰
   - **æ•°æ®åº“æ–‡ä»¶ï¼š** ç‚¹å‡»æµè§ˆæŒ‰é’®ï¼Œé€‰æ‹© `backend/db.sqlite3` æ–‡ä»¶
   - å®Œæ•´è·¯å¾„ç¤ºä¾‹ï¼š`D:\dev\system\exam_managment_system\backend\db.sqlite3`
4. **è¿æ¥ï¼š**
   - ç‚¹å‡» "æµ‹è¯•è¿æ¥" ç¡®è®¤å¯ä»¥è¿æ¥
   - ç‚¹å‡» "ç¡®å®š" ä¿å­˜è¿æ¥
   - åŒå‡»è¿æ¥åç§°æ‰“å¼€æ•°æ®åº“
5. **æŸ¥çœ‹æ•°æ®ï¼š**
   - åœ¨å·¦ä¾§å¯ä»¥çœ‹åˆ°æ‰€æœ‰è¡¨
   - åŒå‡»è¡¨åå¯ä»¥æŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®
   - å¯ä»¥ä½¿ç”¨SQLæŸ¥è¯¢åŠŸèƒ½

**ä¼˜åŠ¿ï¼š**
- âœ… å‹å¥½çš„å›¾å½¢ç•Œé¢
- âœ… æ”¯æŒSQLæŸ¥è¯¢å’Œç¼–è¾‘
- âœ… å¯ä»¥å¯¼å‡ºæ•°æ®ä¸ºå¤šç§æ ¼å¼
- âœ… æ”¯æŒæ•°æ®å¯è§†åŒ–

#### 4.4 PyCharm Professional

PyCharm Professional å†…ç½®äº†æ•°æ®åº“å·¥å…·ï¼š
1. æ‰“å¼€ Database å·¥å…·çª—å£
2. æ·»åŠ æ•°æ®æº â†’ SQLite
3. é€‰æ‹© `db.sqlite3` æ–‡ä»¶
4. å¯ä»¥æŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®

---

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

### ä¸»è¦è¡¨ï¼š

1. **users_user** - ç”¨æˆ·è¡¨
   - id, username, email, password, role, created_at

2. **classes_class** - ç­çº§è¡¨
   - id, name, description, teacher_id, created_at, updated_at

3. **classes_invitationcode** - é‚€è¯·ç è¡¨
   - id, code, class_obj_id, max_uses, current_uses, is_active

4. **tasks_task** - ä»»åŠ¡è¡¨
   - id, title, description, language, class_obj_id, created_by_id, deadline, is_active

5. **tasks_testcase** - æµ‹è¯•ç”¨ä¾‹è¡¨
   - id, task_id, input_data, expected_output, is_hidden, order, weight

6. **submissions_submission** - æäº¤è¡¨
   - id, task_id, student_id, code_content, language, score, test_count, total_time

7. **submissions_testresult** - æµ‹è¯•ç»“æœè¡¨
   - id, submission_id, test_case_id, passed, output, error_message, execution_time

8. **submissions_testattempt** - æµ‹è¯•å°è¯•è¡¨
   - id, task_id, student_id, code_content, language, test_results (JSON)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

**æœ€ç®€å•çš„è®¿é—®æ–¹å¼ï¼š**

1. åˆ›å»ºè¶…çº§ç”¨æˆ·ï¼š
   ```bash
   cd backend
   conda activate exam_management
   python manage.py createsuperuser
   ```

2. è®¿é—® Adminï¼š
   - æ‰“å¼€æµè§ˆå™¨ï¼šhttp://localhost:8000/admin/
   - ç™»å½•åå³å¯æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰æ•°æ®

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½æ•°æ®ï¼š** åœ¨ä¿®æ”¹æ•°æ®åº“å‰ï¼Œå»ºè®®å¤‡ä»½ `db.sqlite3` æ–‡ä»¶
2. **ç”Ÿäº§ç¯å¢ƒï¼š** ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ PostgreSQLï¼Œéœ€è¦é…ç½® `.env` æ–‡ä»¶ä¸­çš„ `USE_POSTGRES=True`
3. **æ•°æ®è¿ç§»ï¼š** å¦‚æœä¿®æ”¹äº†æ¨¡å‹ï¼Œè®°å¾—è¿è¡Œ `python manage.py makemigrations` å’Œ `python manage.py migrate`

